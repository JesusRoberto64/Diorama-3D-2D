[gd_scene load_steps=55 format=3 uid="uid://cng1jxfdc7jj3"]

[ext_resource type="Texture2D" uid="uid://bdmui7gvwfag7" path="res://Recursos/PlayStation - SaGa Frontier 2 - Gustave XIII.png" id="1_a5rb2"]
[ext_resource type="Script" uid="uid://fo0is343w8k" path="res://Logica/player_3d.gd" id="2_rhdfu"]
[ext_resource type="Script" uid="uid://cygwh6u36ua4" path="res://Logica/cam_ancher.gd" id="3_qiy83"]
[ext_resource type="Script" uid="uid://cgfbwjxpafb22" path="res://Logica/player.gd" id="4_45aoy"]
[ext_resource type="PackedScene" uid="uid://ciy81ek51eore" path="res://Escenas/kokiri_forest_01.tscn" id="6_kl47q"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_qiy83"]
radius = 0.174116
height = 0.484669

[sub_resource type="AtlasTexture" id="AtlasTexture_wnosv"]
atlas = ExtResource("1_a5rb2")
region = Rect2(224, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_xtlwq"]
atlas = ExtResource("1_a5rb2")
region = Rect2(168, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_f51e8"]
atlas = ExtResource("1_a5rb2")
region = Rect2(56, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_a5rb2"]
atlas = ExtResource("1_a5rb2")
region = Rect2(0, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_n0apq"]
atlas = ExtResource("1_a5rb2")
region = Rect2(112, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_rhdfu"]
atlas = ExtResource("1_a5rb2")
region = Rect2(0, 192, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_qiy83"]
atlas = ExtResource("1_a5rb2")
region = Rect2(56, 192, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_kl47q"]
atlas = ExtResource("1_a5rb2")
region = Rect2(112, 192, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_45aoy"]
atlas = ExtResource("1_a5rb2")
region = Rect2(168, 192, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_sqaf8"]
atlas = ExtResource("1_a5rb2")
region = Rect2(224, 192, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_y8mmr"]
atlas = ExtResource("1_a5rb2")
region = Rect2(504, 128, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_orrk3"]
atlas = ExtResource("1_a5rb2")
region = Rect2(168, 128, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_8wrwv"]
atlas = ExtResource("1_a5rb2")
region = Rect2(224, 128, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ftfbh"]
atlas = ExtResource("1_a5rb2")
region = Rect2(280, 128, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_kb6in"]
atlas = ExtResource("1_a5rb2")
region = Rect2(336, 128, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_bfvaf"]
atlas = ExtResource("1_a5rb2")
region = Rect2(392, 128, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lqm17"]
atlas = ExtResource("1_a5rb2")
region = Rect2(448, 128, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_t4aef"]
atlas = ExtResource("1_a5rb2")
region = Rect2(56, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_h5ntx"]
atlas = ExtResource("1_a5rb2")
region = Rect2(112, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_xkxhm"]
atlas = ExtResource("1_a5rb2")
region = Rect2(168, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_b1r5j"]
atlas = ExtResource("1_a5rb2")
region = Rect2(224, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_n1iuj"]
atlas = ExtResource("1_a5rb2")
region = Rect2(280, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_1camk"]
atlas = ExtResource("1_a5rb2")
region = Rect2(336, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_2wjwr"]
atlas = ExtResource("1_a5rb2")
region = Rect2(280, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_jirab"]
atlas = ExtResource("1_a5rb2")
region = Rect2(336, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ofn6l"]
atlas = ExtResource("1_a5rb2")
region = Rect2(392, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_sdx5e"]
atlas = ExtResource("1_a5rb2")
region = Rect2(448, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_jst8e"]
atlas = ExtResource("1_a5rb2")
region = Rect2(504, 0, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_xi6gi"]
atlas = ExtResource("1_a5rb2")
region = Rect2(0, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_idvrb"]
atlas = ExtResource("1_a5rb2")
region = Rect2(392, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_nstnf"]
atlas = ExtResource("1_a5rb2")
region = Rect2(448, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_q3h6f"]
atlas = ExtResource("1_a5rb2")
region = Rect2(504, 64, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_75kwc"]
atlas = ExtResource("1_a5rb2")
region = Rect2(0, 128, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_thr0i"]
atlas = ExtResource("1_a5rb2")
region = Rect2(56, 128, 56, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_0erik"]
atlas = ExtResource("1_a5rb2")
region = Rect2(112, 128, 56, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_sqaf8"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wnosv")
}],
"loop": true,
"name": &"idle backward",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xtlwq")
}],
"loop": true,
"name": &"idle diagonal backward",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_f51e8")
}],
"loop": true,
"name": &"idle diagonal fordward",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_a5rb2")
}],
"loop": true,
"name": &"idle fordward",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_n0apq")
}],
"loop": true,
"name": &"idle side",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_rhdfu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qiy83")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kl47q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_45aoy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sqaf8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y8mmr")
}],
"loop": true,
"name": &"walk backward",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_orrk3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8wrwv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ftfbh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kb6in")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bfvaf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lqm17")
}],
"loop": true,
"name": &"walk diagonal backward",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_t4aef")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h5ntx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xkxhm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b1r5j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n1iuj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1camk")
}],
"loop": true,
"name": &"walk diagonal fordward",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2wjwr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jirab")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ofn6l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sdx5e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jst8e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xi6gi")
}],
"loop": true,
"name": &"walk fordward",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_idvrb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nstnf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q3h6f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_75kwc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_thr0i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0erik")
}],
"loop": true,
"name": &"walk side",
"speed": 5.0
}]

[sub_resource type="QuadMesh" id="QuadMesh_y8mmr"]
size = Vector2(0.5, 0.6)

[sub_resource type="ViewportTexture" id="ViewportTexture_qiy83"]
viewport_path = NodePath("Player3D/SubViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_y8mmr"]
resource_local_to_scene = true
transparency = 2
alpha_scissor_threshold = 0.5
alpha_antialiasing_mode = 0
albedo_texture = SubResource("ViewportTexture_qiy83")
metallic = 0.5
metallic_specular = 0.3
disable_receive_shadows = true
billboard_mode = 1

[sub_resource type="ViewportTexture" id="ViewportTexture_kl47q"]
viewport_path = NodePath("Player3D/SubViewport")

[sub_resource type="QuadMesh" id="QuadMesh_qiy83"]
size = Vector2(0.5, 0.6)

[sub_resource type="ViewportTexture" id="ViewportTexture_45aoy"]
viewport_path = NodePath("Player3D/SubViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kl47q"]
resource_local_to_scene = true
transparency = 2
alpha_scissor_threshold = 0.5
alpha_antialiasing_mode = 0
cull_mode = 2
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_45aoy")
distance_fade_mode = 1
distance_fade_max_distance = 25.0

[sub_resource type="CapsuleMesh" id="CapsuleMesh_qiy83"]
radius = 0.1
height = 0.25

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_45aoy"]
transparency = 2
alpha_scissor_threshold = 0.5
alpha_antialiasing_mode = 0
distance_fade_mode = 1
distance_fade_max_distance = 25.0

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_kl47q"]
sky_energy_multiplier = 7.4
ground_curve = 0.04

[sub_resource type="Sky" id="Sky_45aoy"]
sky_material = SubResource("ProceduralSkyMaterial_kl47q")

[sub_resource type="Environment" id="Environment_sqaf8"]
background_mode = 2
sky = SubResource("Sky_45aoy")
glow_intensity = 0.51
glow_mix = 0.543
glow_blend_mode = 0

[node name="main3d" type="Node3D"]

[node name="Player3D" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.55229, 0.288333, -1.81012)
floor_constant_speed = true
script = ExtResource("2_rhdfu")
MAX_ACCEL = 1.85
releace_time = 0.01
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0314221, 0.0114934, 0)
shape = SubResource("CapsuleShape3D_qiy83")

[node name="CamAncher" type="Node3D" parent="Player3D"]
script = ExtResource("3_qiy83")

[node name="Camera3D" type="Camera3D" parent="Player3D/CamAncher"]
transform = Transform3D(1, -0.000295626, -0.000174946, 0.000343458, 0.86952, 0.493897, 6.11041e-06, -0.493897, 0.86952, -0.0157449, 3.12483, 4.27734)
rotation_edit_mode = 2
fov = 36.9322
size = 2.70092

[node name="RayCast3D" type="RayCast3D" parent="Player3D/CamAncher"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0157449, 3.12483, 4.27734)
rotation_edit_mode = 2
visible = false
target_position = Vector3(0, -0.38, -0.49)
collision_mask = 2
hit_from_inside = true
debug_shape_custom_color = Color(0, 0, 0, 0)

[node name="SubViewport" type="SubViewport" parent="Player3D"]
disable_3d = true
transparent_bg = true
canvas_item_default_texture_filter = 0
size = Vector2i(100, 120)
render_target_update_mode = 4

[node name="player" type="AnimatedSprite2D" parent="Player3D/SubViewport"]
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_sqaf8")
animation = &"walk side"
centered = false
script = ExtResource("4_45aoy")
MAX_ACCEL = 2.0
releace_time = 0.1

[node name="character" type="MeshInstance3D" parent="Player3D"]
cast_shadow = 0
mesh = SubResource("QuadMesh_y8mmr")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_y8mmr")

[node name="fore_shadow" type="Sprite3D" parent="Player3D"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
layers = 2
cast_shadow = 0
modulate = Color(0, 0, 0, 0.705882)
billboard = 1
double_sided = false
no_depth_test = true
texture_filter = 0
texture = SubResource("ViewportTexture_kl47q")

[node name="cast_shadow" type="MeshInstance3D" parent="Player3D"]
transform = Transform3D(-0.2807, 0, 0.959795, 0, 1, 0, 0.959795, 0, 0.2807, 0, 0.0036611, 0)
gi_mode = 0
mesh = SubResource("QuadMesh_qiy83")
surface_material_override/0 = SubResource("StandardMaterial3D_kl47q")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Player3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.148271, 0, 0)
mesh = SubResource("CapsuleMesh_qiy83")
surface_material_override/0 = SubResource("StandardMaterial3D_45aoy")

[node name="kokiri_forest_01" parent="." instance=ExtResource("6_kl47q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.285789, 0.0169206, -0.271752)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.774696, -0.165547, 0.610278, 0.604545, 0.0890587, 0.791578, -0.185394, 0.982173, 0.0310868, 5.62471, 3.83172, -0.578666)
light_energy = 1.879
shadow_enabled = true
sky_mode = 1

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_sqaf8")
